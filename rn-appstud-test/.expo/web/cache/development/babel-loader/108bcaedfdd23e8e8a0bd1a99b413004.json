{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/flo/Documents/Code/react-native/appstud/rn-appstud-test/screens/PlaylistDetailScreen.tsx\";\nimport * as React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport axios from \"axios\";\nimport TrackPlayer from \"react-native-track-player\";\nvar API_ENDPOINT = \"http://localhost:3001\";\n\nvar trackPlayerInit = function trackPlayerInit() {\n  return _regeneratorRuntime.async(function trackPlayerInit$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(TrackPlayer.setupPlayer());\n\n        case 2:\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(TrackPlayer.add({\n            id: \"1\",\n            url: \"https://audio-previews.elements.envatousercontent.com/files/103682271/preview.mp3\",\n            type: \"default\",\n            title: \"My Title\",\n            album: \"My Album\",\n            artist: \"Rohan Bhatia\",\n            artwork: \"https://picsum.photos/100\"\n          }));\n\n        case 4:\n          return _context.abrupt(\"return\", true);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default function PlaylistDetailScreen(_ref) {\n  var route = _ref.route;\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      playlistDetail = _React$useState2[0],\n      setPlaylistDetail = _React$useState2[1];\n\n  var id = route.params.id;\n  React.useEffect(function () {\n    var startPlayer = function startPlayer() {\n      var isInit;\n      return _regeneratorRuntime.async(function startPlayer$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(trackPlayerInit());\n\n            case 2:\n              isInit = _context2.sent;\n              setIsTrackPlayerInit(isInit);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    startPlayer();\n  }, []);\n  React.useEffect(function () {\n    var fetchData = function fetchData() {\n      var response;\n      return _regeneratorRuntime.async(function fetchData$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(axios.get(API_ENDPOINT + \"/v1/playlists/\" + id));\n\n            case 2:\n              response = _context3.sent;\n              setPlaylistDetail(response.data);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetchData();\n  });\n\n  var handleSound = function handleSound(sound) {\n    console.log(\"sound : \", sound);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, playlistDetail && React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    source: {\n      uri: playlistDetail.images[0].url\n    },\n    style: {\n      width: 85,\n      height: 85\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, playlistDetail.name), React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, playlistDetail.description)), React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, playlistDetail.tracks.items.map(function (item) {\n    return React.createElement(TouchableOpacity, {\n      key: item.track.id,\n      onPress: function onPress() {\n        return handleSound(item.track.preview_url);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: item.track.preview_url ? \"#000\" : \"grey\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, item.track.name));\n  }))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\"\n  },\n  description: {\n    fontSize: 12\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: \"80%\"\n  }\n});","map":{"version":3,"sources":["/Users/flo/Documents/Code/react-native/appstud/rn-appstud-test/screens/PlaylistDetailScreen.tsx"],"names":["React","axios","TrackPlayer","API_ENDPOINT","trackPlayerInit","setupPlayer","add","id","url","type","title","album","artist","artwork","PlaylistDetailScreen","route","useState","playlistDetail","setPlaylistDetail","params","useEffect","startPlayer","isInit","setIsTrackPlayerInit","fetchData","get","response","data","handleSound","sound","console","log","styles","container","uri","images","width","height","name","description","tracks","items","map","item","track","preview_url","color","StyleSheet","create","flex","alignItems","justifyContent","fontSize","fontWeight","separator","marginVertical"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n  View,\n  ScrollView,\n  Text,\n  StyleSheet,\n  Image,\n  TouchableOpacity,\n} from \"react-native\";\nimport axios from \"axios\";\nimport { StackScreenProps } from \"@react-navigation/stack\";\nimport { PlaylistDetail, Item } from \"../models/PlaylistDetail\";\nimport TrackPlayer from \"react-native-track-player\";\n\nconst API_ENDPOINT = \"http://localhost:3001\";\n\n//function to initialize the Track Player\nconst trackPlayerInit = async () => {\n  await TrackPlayer.setupPlayer();\n  await TrackPlayer.add({\n    id: \"1\",\n    url:\n      \"https://audio-previews.elements.envatousercontent.com/files/103682271/preview.mp3\",\n    type: \"default\",\n    title: \"My Title\",\n    album: \"My Album\",\n    artist: \"Rohan Bhatia\",\n    artwork: \"https://picsum.photos/100\",\n  });\n  return true;\n};\n\ntype RootStackParamList = {\n  PlaylistDetail: { id: string };\n};\n\ntype Props = StackScreenProps<RootStackParamList, \"PlaylistDetail\">;\n\nexport default function PlaylistDetailScreen({ route }: Props) {\n  const [playlistDetail, setPlaylistDetail] = React.useState<PlaylistDetail>();\n  const { id } = route.params;\n\n  //initialize the TrackPlayer when the App component is mounted\n  React.useEffect(() => {\n    const startPlayer = async () => {\n      let isInit = await trackPlayerInit();\n      setIsTrackPlayerInit(isInit);\n    };\n    startPlayer();\n  }, []);\n\n  // TrackPlayer.setupPlayer().then(() => {\n  //   // The player is ready to be used\n  // });\n\n  React.useEffect(() => {\n    const fetchData = async () => {\n      const response = await axios.get(`${API_ENDPOINT}/v1/playlists/${id}`);\n      // console.log(\"response.data[0] : \", response.data);\n      setPlaylistDetail(response.data);\n    };\n    fetchData();\n  });\n\n  const handleSound = (sound: string) => {\n    console.log(\"sound : \", sound);\n  };\n\n  return (\n    <View style={styles.container}>\n      {playlistDetail && (\n        <View>\n          <View>\n            <Image\n              source={{ uri: playlistDetail.images[0].url }}\n              style={{ width: 85, height: 85 }}\n            />\n            <Text style={styles.title}>{playlistDetail.name}</Text>\n            <Text style={styles.description}>{playlistDetail.description}</Text>\n          </View>\n          <ScrollView>\n            {playlistDetail.tracks.items.map((item: Item) => (\n              <TouchableOpacity\n                key={item.track.id}\n                onPress={() => handleSound(item.track.preview_url)}\n              >\n                <Text\n                  style={{ color: item.track.preview_url ? \"#000\" : \"grey\" }}\n                >\n                  {item.track.name}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </ScrollView>\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n  },\n  description: {\n    fontSize: 12,\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: \"80%\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}